---
title: "ODISSEI projects database"
author: 
  name: "Angelica M. Maineri"
  email: "angelica@odissei-data.nl"
  affiliation: "ODISSEI"
date: '`r Sys.Date()`'
knit: (function(inputFile, encoding) {
  rmarkdown::render(inputFile, encoding = encoding, output_file="./docs/index.html") })
output: 
  html_document:
    theme: lumen
---

<!---
Many thanks to Raffaele Vacca https://github.com/raffaelevacca/Open-social-network-surveys/blob/main/network-surveys-software.Rmd
-->

<base target="_top"/>

This is a list of projects supported by ODISSEI. It is a very early draft. 

# CBS microdata projects

```{r, echo = FALSE, message = FALSE}
suppressWarnings(library(DT))
suppressWarnings(library(tidyverse))
suppressWarnings(library(magrittr))

# Read the data
data.projects <- read_csv("./Data/odissei_projects.csv")

#data.projects %<>%
#  # Extract latest survey year
#  mutate(
#    max.year = map_dbl(Year, 
#                       ~ str_split(.x, ",|-", simplify = TRUE) %>%
#                         as.vector %>%
#                         as.numeric %>%
#                         max
#    )
#  ) %>%
#  # Sort by latest survey year
#  arrange(desc(max.year)) %>%
#  dplyr::select(-max.year)

# Convert markdown links to html links across all columns
data.projects %<>%
  mutate(across(everything(),
                ~ str_replace_all(.x,
                                  "\\[([^\\]]+)\\]\\(([^\\)]+)\\)",
                                  "\\<a target=_blank href=\\2>\\1</a>")
  )
  )

# Export to datatable
DT::datatable(data.projects, escape = FALSE)
```
